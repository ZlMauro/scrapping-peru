import{j as c,a as e,r as u,H as se,F as U}from"./app-dcd3922e.js";import{A as de}from"./AuthenticatedLayout-24438c3f.js";import{$ as Q,P as ce,L as oe}from"./Loader-5191ac65.js";import{M as H}from"./Modal-292be896.js";import{F as ne}from"./Form-11cbb6b4.js";/* empty css                      *//* empty css                 *//* empty css              */import"./ApplicationLogo-fae98692.js";import"./ApplicationLogoLici-a2e29c08.js";import"./transition-9cf396d0.js";import"./createWithBsPrefix-a68b3894.js";import"./CloseButton-a10fcccb.js";import"./hasClass-0219308f.js";import"./ElementChildren-3efe8bfe.js";function le({type:C="submit",className:x="",processing:b,children:g,onClick:r}){return c("button",{style:{backgroundColor:"#57C700"},type:C,onClick:r,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${b&&"opacity-25"} `+x,disabled:b,children:[g,e("i",{className:"bi bi-share text-gray-500 iconos-tamano-margen"})]})}function re({type:C="submit",className:x="",processing:b,children:g,onClick:r}){return c("button",{style:{backgroundColor:"#57C700"},type:C,onClick:r,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${b&&"opacity-25"} `+x,disabled:b,children:[g,e("i",{className:"bi bi-folder-minus text-gray-500 iconos-tamano-margen"})]})}const ue=C=>e("a",{href:C.url,target:"_blank",children:e("button",{style:{backgroundColor:"#57C700"},className:"boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ",children:e("i",{className:"bi bi-upload text-gray-500 iconos-tamano-margen"})})});function he({type:C="submit",className:x="",processing:b,children:g,onClick:r}){return c("button",{style:{backgroundColor:"#57C700"},type:C,onClick:r,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${b&&"opacity-25"} `+x,disabled:b,children:[g,e("i",{className:"bi bi-star text-gray-500 iconos-tamano-margen"})]})}function pe({type:C="submit",className:x="",processing:b,children:g,onClick:r}){return c("button",{style:{backgroundColor:"#57C700"},type:C,onClick:r,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${b&&"opacity-25"} `+x,disabled:b,children:[g,e("i",{className:"bi bi-filetype-pdf text-gray-500 iconos-tamano-margen"})]})}function me({type:C="submit",className:x="",processing:b,children:g,onClick:r}){return c("button",{style:{backgroundColor:"#57C700"},type:C,onClick:r,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${b&&"opacity-25"} `+x,disabled:b,children:[g,e("i",{className:"bi bi-eye text-gray-500 iconos-tamano-margen"})]})}const be=({showBusquedaEstado:C,handleCloseBusquedaEstado:x,onClose:b,onValuesSelected:g})=>{const[r,S]=u.exports.useState({todos:!1,publicada:!1,evaluacion:!1,adjudicada:!1,revocada:!1,cerrada:!1}),N=L=>{const{name:q,checked:I}=L.target;S(q==="todos"?{todos:I,publicada:I,evaluacion:I,adjudicada:I,revocada:I,cerrada:I}:{...r,[q]:I})},y=()=>{const L=Object.keys(r).filter(q=>r[q]);g(L),x()};return c(H,{size:"md",dialogClassName:"",contentClassName:"",backdropClassName:"",className:"",centered:!0,show:C,onHide:x,id:"BusquedaEstado",children:[c(H.Header,{closeButton:!0,children:[e(se,{title:"Busqueda estado"}),e("div",{className:"titulo",children:e("span",{children:"Seleciona el estado"})})]}),e(H.Body,{children:c("div",{className:"busqueda-estado",children:[e("div",{children:e("input",{type:"text",className:"buscador",placeholder:"Buscar estado"})}),c("div",{children:[c("div",{className:"form",children:[c("div",{className:"todos",children:[e("input",{type:"checkbox",name:"todos",checked:r.todos,onChange:N}),e("label",{children:"Seleciona todoss los estados"})]}),e("hr",{}),c("div",{children:[e("input",{type:"checkbox",name:"publicada",checked:r.publicada,onChange:N}),e("label",{children:"Publicada"})]}),e("hr",{}),c("div",{children:[e("input",{type:"checkbox",name:"evaluacion",checked:r.evaluacion,onChange:N}),e("label",{children:"En evaluacion"})]}),e("hr",{}),c("div",{children:[e("input",{type:"checkbox",name:"adjudicada",checked:r.adjudicada,onChange:N}),e("label",{children:"Adjudicada"})]}),e("hr",{}),c("div",{children:[e("input",{type:"checkbox",name:"revocada",checked:r.revocada,onChange:N}),e("label",{children:"Revocada"})]}),e("hr",{}),c("div",{children:[e("input",{type:"checkbox",name:"cerrada",checked:r.cerrada,onChange:N}),e("label",{children:"Terminado anormalmente o descartado"})]}),e("hr",{})]}),e("button",{className:"boton",onClick:y,children:"Seleccionar"})]})]})})]})};const fe=({showBusquedaUbicacion:C,handleCloseBusquedaUbicacion:x})=>{u.exports.useEffect(()=>{fetch("/localizacion/json").then(s=>s.json()).then(s=>{g(s),S(s),y([])}).catch(s=>console.log("Solicitud fallida",s))},[]);const[b,g]=u.exports.useState([]),[r,S]=u.exports.useState([]),[N,y]=u.exports.useState([]),[L,q]=u.exports.useState([]),[I,K]=u.exports.useState([]);u.exports.useEffect(()=>{var s=[];r.forEach(a=>{if(a.childs.length>0){var o=[];a.id_padre_sub_categoria==null&&(a.childs.forEach(m=>{o.push(m.id),r.filter(i=>i.id==m.id)[0]}),s[a.id]=["sectores"],s[a.id].segmentos=o)}}),K(s)},[]);const[A,O]=u.exports.useState([]),[j,$]=u.exports.useState([]),M=s=>{var a=document.getElementById("sector_"+s);a.classList.toggle("expanded"),N.includes(s)?y(N.filter(i=>i!=s)):y([...N,s]);const o=new RegExp(s,"i");b.filter(function(i){if(o.test(i.id_padre_sub_categoria))return i}).forEach(i=>{if(!j.includes(i))j.push(i);else{const t=j.filter(n=>n.id_padre_sub_categoria!=s);$(t)}})},T=s=>{var a=[];A.forEach(i=>{a.push(i)});var o=r.filter(i=>i.id_padre_sub_categoria==s.id&&i.id_abuelo_sub_categoria==null);if(o.length>0)a.includes(s.id)?(a=z(a,s.id),a=B(a,o,"segmento","remove")):(a.push(s.id),a=B(a,o,"segmento","remove"),a=B(a,o,"segmento","add"));else{var m=r.filter(i=>i.id_padre_sub_categoria==s.id);m.length>0?a.includes(s.id)?(a=z(a,s.id),a=B(a,m,"tipo_compra","remove")):(a.push(s.id),a=B(a,m,"tiposcompras","remove"),a=B(a,m,"tipo_compra","add")):a.includes(s.id)?a=z(a,s.id):a.push(s.id)}a=[...new Set(a)],O(a),R(a,s)},J=s=>{var a=r.filter(o=>o.id==s)[0];return a.id_abuelo_sub_categoria==null&&a.id_padre_sub_categoria==null?a:!1},D=s=>{var a=r.filter(o=>o.id==s)[0];return a.id_abuelo_sub_categoria==null&&a.id_padre_sub_categoria!=null?a:!1},R=(s,a)=>{if(D(a.id)){var o=[];s.forEach(d=>{D(d)&&o.push(d)});var m=!0,i=0;o.length>0?o.forEach(d=>{var h=r.filter(f=>f.id==d)[0];I[h.id_padre_sub_categoria].segmentos.forEach(f=>{o.includes(f)?i+=1:m=!1})}):m=!1;var t=document.getElementById("sector_check_"+a.id_padre_sub_categoria),n=document.getElementById("segmento_check_"+a.id);m?s.push(a.id_padre_sub_categoria):(s=z(s,a.id_padre_sub_categoria),O(s),i>0?(console.log("here"),t.classList.add("check-minus")):(t.classList.remove("check-minus"),n.classList.remove("check-minus")))}if(J(a.id)){var t=document.getElementById("sector_check_"+a.id);t.classList.remove("check-minus")}},z=(s,a)=>{const o=s.indexOf(a);return o>-1&&s.splice(o,1),s},B=(s,a,o=null,m)=>(a.forEach(i=>{switch(m){case"add":s.push(i.id),o=="segmento"&&r.filter(n=>n.id_padre_sub_categoria==i.id).forEach(n=>{s.push(n.id)});break;case"remove":s=z(s,i.id),o=="segmento"&&r.filter(n=>n.id_padre_sub_categoria==i.id).forEach(n=>{s=z(s,n.id)});break}}),s),G=s=>{if(s.target.value==""){g(r),$([]),y([]),q([]);return}if(s.key==="Enter"){const t=new RegExp(s.target.value,"i"),n=r.filter(function(d){if(t.test(d.nombre)||s.target.value==d.id)return d});var a=[],o=[],m=[],i=[];n.forEach(d=>{if(d.id_abuelo_sub_categoria!=null&&d.id_padre_sub_categoria!=null){var h=r.filter(_=>_.id==d.id_padre_sub_categoria)[0];o.includes(h)||o.push(h),m.includes(d.id_padre_sub_categoria)||m.push(d.id_padre_sub_categoria)}if(d.id_abuelo_sub_categoria==null&&d.id_padre_sub_categoria!=null){o.includes(d)||o.push(d),m.includes(d.id)||m.push(d.id);var f=r.filter(_=>_.id==d.id_padre_sub_categoria)[0];a.includes(f)||a.push(f),i.includes(d.id_padre_sub_categoria)||i.push(d.id_padre_sub_categoria)}d.id_abuelo_sub_categoria==null&&d.id_padre_sub_categoria==null&&(a.includes(d)||a.push(d),i.includes(d.id)||i.push(d.id))}),g(a),$(o),y(i),q(m)}};return e(H,{size:"xl",dialogClassName:"",contentClassName:"",backdropClassName:"",className:"",centered:!0,show:C,onHide:x,children:c(U,{children:[e(H.Header,{closeButton:!0,className:"header",children:e("h2",{className:"name_section_app-mbu",children:"Seleccione la modalidad."})}),e(H.Body,{id:"BusquedaUbicacion",className:"contenedor-planes",children:e("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll-mbu",children:e("div",{className:"container mt-4",children:e("div",{className:"tree_categorias-mbu tree_1",children:c("div",{className:"tree_categorias-mbu__busqueda-mbu mb-3 mb-md-4",children:[c("div",{className:"mx-60 mt-30 d-flex",children:[e("button",{button:!0,type:"button",className:"icon-Buscar-click"}),e("input",{type:"text",placeholder:"Busca por modalidad",autoComplete:"off",className:"form-control-mbu busqueda-input",onKeyDown:G})]}),e("div",{children:e("ul",{className:"tree-root-mbu",children:b.map(s=>e(U,{children:s.id_padre_sub_categoria==null&&c("li",{className:`tree-node-mbu has-child draggable ${N.includes(s.id)?"expanded":""}`,id:"sector_"+s.id,children:[c("div",{id:s.id,className:"tree-content-mbu mt-3 sector",children:[e("i",{className:`tree-arrow-mbu has-child ${s.childs.length>0?"bi bi-chevron-down":""}`}),e("input",{id:"sector_check_"+s.id,type:"checkbox",name:"tipo_compra",onChange:()=>T(s),checked:A.includes(s.id)?"checked":""}),e("span",{className:"tree-anchor-mbu",children:e("span",{className:"tree-division-mbu tree-division-mbu1",onClick:()=>M(s.id),children:e("span",{className:"tree-division-mbu__title my-auto",children:s.nombre})})})]},s.id),N.includes(s.id)&&e("ul",{className:"tree-children-mbu new-class",children:j.map((a,o)=>e(U,{children:s.id==a.id_padre_sub_categoria&&e("li",{className:`tree-node-mbu has-child draggable segmento ${L.includes(a.id)?"expanded":""}`,id:"segmento_"+a.id,children:c("div",{className:"tree-content-mbu segmento",children:[e("i",{className:"tree-arrow-mbu expanded has-child ltr"}),e("input",{id:"segmento_check_"+a.id,type:"checkbox",name:"tipo_compra",onChange:()=>T(a),checked:A.includes(a.id)?"checked":""}),e("span",{className:"tree-anchor-mbu",children:e("span",{className:"tree-division-mbu tree-division-mbu1",children:e(U,{children:o%2==0?e("span",{className:"tree-division-mbu__title my-auto",children:a.nombre}):e("span",{className:"tree-division-mbu__title-gray my-auto",children:a.nombre})})})})]})})}))})]})}))})})]})})})})})]})})},ge=({showBusquedaActividad:C,handleCloseBusquedaActividad:x})=>{u.exports.useEffect(()=>{fetch("/actividades-economicas/json").then(i=>i.json()).then(i=>{S(i),g(i)}).catch(i=>console.log("Solicitud fallida",i))},[]);const[b,g]=u.exports.useState([]),[r,S]=u.exports.useState([]),[N,y]=u.exports.useState([]),[L,q]=u.exports.useState([]),[I,K]=u.exports.useState([]);u.exports.useEffect(()=>{var i=[];b.forEach(t=>{if(t.childs.length>0){var n=[],d=[];t.id_padre_sub_categoria==null&&(t.childs.forEach(h=>{n.push(h.id);var f=b.filter(_=>_.id==h.id)[0];f.childs.length>0&&f.childs.forEach(_=>{d.push(_.id)})}),i[t.id]=["sectores"],i[t.id].segmentos=n,i[t.id].actividades_economicas=d)}}),K(i)},[]);const[A,O]=u.exports.useState([]),[j,$]=u.exports.useState([]),[M,T]=u.exports.useState([]),J=i=>{var t=document.getElementById("sector_"+i);t.classList.toggle("expanded"),N.includes(i)?y(N.filter(h=>h!=i)):y([...N,i]);const n=new RegExp(i,"i");r.filter(function(h){if(n.test(h.id_padre_sub_categoria))return h}).forEach(h=>{if(!j.includes(h))j.push(h);else{const f=j.filter(_=>_.id_padre_sub_categoria!=i);$(f)}})},D=i=>{var t=document.getElementById("segmento_"+i);t.classList.toggle("expanded"),L.includes(i)?q(L.filter(h=>h!=i)):q([...L,i]);const n=new RegExp(i,"i");r.filter(function(h){if(n.test(h.id_padre_sub_categoria))return h}).forEach(h=>{if(!M.includes(h))M.push(h);else{const f=M.filter(_=>_.id_padre_sub_categoria!=i);T(f)}})},R=i=>{var t=[];A.forEach(h=>{t.push(h)});var n=b.filter(h=>h.id_padre_sub_categoria==i.id&&h.id_abuelo_sub_categoria==null);if(n.length>0)t.includes(i.id)?(t=a(t,i.id),t=o(t,n,"segmento","remove")):(t.push(i.id),t=o(t,n,"segmento","remove"),t=o(t,n,"segmento","add"));else{var d=b.filter(h=>h.id_padre_sub_categoria==i.id);d.length>0?t.includes(i.id)?(t=a(t,i.id),t=o(t,d,"actividad_economica","remove")):(t.push(i.id),t=o(t,d,"actividades_economicas","remove"),t=o(t,d,"actividad_economica","add")):t.includes(i.id)?t=a(t,i.id):t.push(i.id)}t=[...new Set(t)],O(t),s(t,i)},z=i=>{var t=b.filter(n=>n.id==i)[0];return t.id_abuelo_sub_categoria==null&&t.id_padre_sub_categoria==null?t:!1},B=i=>{var t=b.filter(n=>n.id==i)[0];return t.id_abuelo_sub_categoria==null&&t.id_padre_sub_categoria!=null?t:!1},G=i=>{var t=b.filter(n=>n.id==i)[0];return t.id_abuelo_sub_categoria!=null&&t.id_padre_sub_categoria!=null?t:!1},s=(i,t)=>{if(G(t.id)){var n=[];i.forEach(P=>{G(P)&&n.push(P)});var d=!0,h=!0,f=0,_=0;n.length>0?n.forEach(P=>{var V=b.filter(X=>X.id==P)[0];I[V.id_abuelo_sub_categoria].actividades_economicas.forEach(X=>{n.includes(X)?f+=1:d=!1})}):d=!1;var w=[];b.forEach(P=>{P.id_padre_sub_categoria==t.id_padre_sub_categoria&&w.push(P.id)}),w.forEach(P=>{n.includes(P)?_+=1:h=!1});var p=document.getElementById("segmento_check_"+t.id_padre_sub_categoria),E=document.getElementById("sector_check_"+t.id_abuelo_sub_categoria);h?(i.push(t.id_padre_sub_categoria),p.classList.remove("check-minus")):(i=a(i,t.id_padre_sub_categoria),i=a(i,t.id_abuelo_sub_categoria),O(i),_>0?p.classList.add("check-minus"):p.classList.remove("check-minus"),f>0?E.classList.add("check-minus"):E.classList.remove("check-minus")),d&&i.push(t.id_abuelo_sub_categoria)}if(B(t.id)){var F=[];i.forEach(Y=>{B(Y)&&F.push(Y)});var d=!0,f=0;F.length>0?F.forEach(Y=>{var ie=b.filter(ee=>ee.id==Y)[0];I[ie.id_padre_sub_categoria].segmentos.forEach(ee=>{F.includes(ee)?f+=1:d=!1})}):d=!1;var E=document.getElementById("sector_check_"+t.id_padre_sub_categoria),p=document.getElementById("segmento_check_"+t.id);d?i.push(t.id_padre_sub_categoria):(i=a(i,t.id_padre_sub_categoria),O(i),f>0?(console.log("here"),E.classList.add("check-minus")):(E.classList.remove("check-minus"),p.classList.remove("check-minus")))}if(z(t.id)){var E=document.getElementById("sector_check_"+t.id);E.classList.remove("check-minus")}},a=(i,t)=>{const n=i.indexOf(t);return n>-1&&i.splice(n,1),i},o=(i,t,n=null,d)=>(t.forEach(h=>{switch(d){case"add":i.push(h.id),n=="segmento"&&b.filter(_=>_.id_padre_sub_categoria==h.id).forEach(_=>{i.push(_.id)});break;case"remove":i=a(i,h.id),n=="segmento"&&b.filter(_=>_.id_padre_sub_categoria==h.id).forEach(_=>{i=a(i,_.id)});break}}),i),m=i=>{if(i.target.value==""){S(b),$([]),T([]),y([]),q([]);return}if(i.key==="Enter"){const _=new RegExp(i.target.value,"i"),w=b.filter(function(p){if(_.test(p.nombre)||i.target.value==p.id)return p});var t=[],n=[],d=[],h=[],f=[];w.forEach(p=>{if(p.id_abuelo_sub_categoria!=null&&p.id_padre_sub_categoria!=null){d.push(p);var E=b.filter(P=>P.id==p.id_padre_sub_categoria)[0];n.includes(E)||n.push(E),h.includes(p.id_padre_sub_categoria)||h.push(p.id_padre_sub_categoria);var F=b.filter(P=>P.id==p.id_abuelo_sub_categoria)[0];t.includes(F)||t.push(F),f.includes(p.id_abuelo_sub_categoria)||f.push(p.id_abuelo_sub_categoria)}if(p.id_abuelo_sub_categoria==null&&p.id_padre_sub_categoria!=null){n.includes(p)||n.push(p),h.includes(p.id)||h.push(p.id);var F=b.filter(V=>V.id==p.id_padre_sub_categoria)[0];t.includes(F)||t.push(F),f.includes(p.id_padre_sub_categoria)||f.push(p.id_padre_sub_categoria)}p.id_abuelo_sub_categoria==null&&p.id_padre_sub_categoria==null&&(t.includes(p)||t.push(p),f.includes(p.id)||f.push(p.id))}),S(t),$(n),T(d),y(f),q(h)}};return c(H,{size:"xl",dialogClassName:"",contentClassName:"",backdropClassName:"",className:"",centered:!0,show:C,onHide:x,id:"",children:[e(H.Header,{closeButton:!0,children:e("h2",{className:"name_section_app",children:"Selecciona la(s) actividad(es) economica(s) de tu interes."})}),e(H.Body,{className:"contenedor-planes",children:e("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll",children:e("div",{className:"container mt-4",children:e("div",{className:"tree_categorias tree_1",children:c("div",{className:"tree_categorias__busqueda mb-3 mb-md-4 ",children:[e("input",{type:"text",placeholder:"Busca por actividad económica o UNSPSC",autoComplete:"off",className:"form-control busqueda-input",onKeyDown:m}),e(U,{children:e("ul",{className:"tree-root",children:r.map(i=>e(U,{children:i.id_padre_sub_categoria==null&&c("li",{className:`tree-node has-child draggable ${N.includes(i.id)?"expanded":""}`,id:"sector_"+i.id,children:[c("div",{id:i.id,className:"tree-content mt-3 sector",children:[e("i",{className:`tree-arrow has-child ${i.childs.length>0?"bi bi-chevron-down":""}`}),e("input",{id:"sector_check_"+i.id,type:"checkbox",name:"actividad_economica",onChange:()=>R(i),checked:A.includes(i.id)?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",onClick:()=>J(i.id),children:e("span",{className:"tree-division__title my-auto",children:i.nombre})})})]},i.id),N.includes(i.id)&&e("ul",{className:"tree-children new-class",children:j.map((t,n)=>e(U,{children:i.id==t.id_padre_sub_categoria&&c("li",{className:`tree-node has-child draggable segmento ${L.includes(t.id)?"expanded":""}`,id:"segmento_"+t.id,children:[c("div",{className:"tree-content segmento",children:[e("i",{className:"tree-arrow expanded has-child ltr"}),e("input",{id:"segmento_check_"+t.id,type:"checkbox",name:"actividad_economica",onChange:()=>R(t),checked:A.includes(t.id)?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",onClick:()=>D(t.id),children:e(U,{children:n%2==0?e("span",{className:"tree-division__title my-auto",children:t.nombre}):e("span",{className:"tree-division__title-gray my-auto",children:t.nombre})})})})]}),L.includes(t.id)&&e("ul",{className:"tree-children actividad-economica",children:M.map((d,h)=>e(U,{children:t.id==d.id_padre_sub_categoria&&e("li",{className:"tree-node draggable",children:c("div",{className:"tree-content actividad-economica",onClick:()=>R(d),children:[e("input",{type:"checkbox",name:"actividad_economica",onChange:()=>R(d),checked:A.includes(d.id)?"checked":""}),e("span",{className:"tree-anchor children",children:e("span",{className:"tree-division tree-division1",children:e(U,{children:e("span",{className:"tree-division__title my-auto",children:d.nombre})})})})]})})}))})]})}))})]})}))})})]})})})})})]})};const _e=({showBusquedaTiposCompras:C,handleCloseBusquedaTiposCompras:x})=>{u.exports.useEffect(()=>{fetch("/tiposcompras/json").then(s=>s.json()).then(s=>{g(s),S(s),y([])}).catch(s=>console.log("Solicitud fallida",s))},[]);const[b,g]=u.exports.useState([]),[r,S]=u.exports.useState([]),[N,y]=u.exports.useState([]),[L,q]=u.exports.useState([]),[I,K]=u.exports.useState([]);u.exports.useEffect(()=>{var s=[];r.forEach(a=>{if(a.childs.length>0){var o=[];a.id_padre_sub_categoria==null&&(a.childs.forEach(m=>{o.push(m.id),r.filter(i=>i.id==m.id)[0]}),s[a.id]=["sectores"],s[a.id].segmentos=o)}}),K(s)},[]);const[A,O]=u.exports.useState([]),[j,$]=u.exports.useState([]),M=s=>{var a=document.getElementById("sector_"+s);a.classList.toggle("expanded"),N.includes(s)?y(N.filter(i=>i!=s)):y([...N,s]);const o=new RegExp(s,"i");b.filter(function(i){if(o.test(i.id_padre_sub_categoria))return i}).forEach(i=>{if(!j.includes(i))j.push(i);else{const t=j.filter(n=>n.id_padre_sub_categoria!=s);$(t)}})},T=s=>{var a=[];A.forEach(i=>{a.push(i)});var o=r.filter(i=>i.id_padre_sub_categoria==s.id&&i.id_abuelo_sub_categoria==null);if(o.length>0)a.includes(s.id)?(a=z(a,s.id),a=B(a,o,"segmento","remove")):(a.push(s.id),a=B(a,o,"segmento","remove"),a=B(a,o,"segmento","add"));else{var m=r.filter(i=>i.id_padre_sub_categoria==s.id);m.length>0?a.includes(s.id)?(a=z(a,s.id),a=B(a,m,"tipo_compra","remove")):(a.push(s.id),a=B(a,m,"tiposcompras","remove"),a=B(a,m,"tipo_compra","add")):a.includes(s.id)?a=z(a,s.id):a.push(s.id)}a=[...new Set(a)],O(a),R(a,s)},J=s=>{var a=r.filter(o=>o.id==s)[0];return a.id_abuelo_sub_categoria==null&&a.id_padre_sub_categoria==null?a:!1},D=s=>{var a=r.filter(o=>o.id==s)[0];return a.id_abuelo_sub_categoria==null&&a.id_padre_sub_categoria!=null?a:!1},R=(s,a)=>{if(D(a.id)){var o=[];s.forEach(d=>{D(d)&&o.push(d)});var m=!0,i=0;o.length>0?o.forEach(d=>{var h=r.filter(f=>f.id==d)[0];I[h.id_padre_sub_categoria].segmentos.forEach(f=>{o.includes(f)?i+=1:m=!1})}):m=!1;var t=document.getElementById("sector_check_"+a.id_padre_sub_categoria),n=document.getElementById("segmento_check_"+a.id);m?s.push(a.id_padre_sub_categoria):(s=z(s,a.id_padre_sub_categoria),O(s),i>0?(console.log("here"),t.classList.add("check-minus")):(t.classList.remove("check-minus"),n.classList.remove("check-minus")))}if(J(a.id)){var t=document.getElementById("sector_check_"+a.id);t.classList.remove("check-minus")}},z=(s,a)=>{const o=s.indexOf(a);return o>-1&&s.splice(o,1),s},B=(s,a,o=null,m)=>(a.forEach(i=>{switch(m){case"add":s.push(i.id),o=="segmento"&&r.filter(n=>n.id_padre_sub_categoria==i.id).forEach(n=>{s.push(n.id)});break;case"remove":s=z(s,i.id),o=="segmento"&&r.filter(n=>n.id_padre_sub_categoria==i.id).forEach(n=>{s=z(s,n.id)});break}}),s),G=s=>{if(s.target.value==""){g(r),$([]),y([]),q([]);return}if(s.key==="Enter"){const t=new RegExp(s.target.value,"i"),n=r.filter(function(d){if(t.test(d.nombre)||s.target.value==d.id)return d});var a=[],o=[],m=[],i=[];n.forEach(d=>{if(d.id_abuelo_sub_categoria!=null&&d.id_padre_sub_categoria!=null){var h=r.filter(_=>_.id==d.id_padre_sub_categoria)[0];o.includes(h)||o.push(h),m.includes(d.id_padre_sub_categoria)||m.push(d.id_padre_sub_categoria)}if(d.id_abuelo_sub_categoria==null&&d.id_padre_sub_categoria!=null){o.includes(d)||o.push(d),m.includes(d.id)||m.push(d.id);var f=r.filter(_=>_.id==d.id_padre_sub_categoria)[0];a.includes(f)||a.push(f),i.includes(d.id_padre_sub_categoria)||i.push(d.id_padre_sub_categoria)}d.id_abuelo_sub_categoria==null&&d.id_padre_sub_categoria==null&&(a.includes(d)||a.push(d),i.includes(d.id)||i.push(d.id))}),g(a),$(o),y(i),q(m)}};return e(H,{size:"xl",dialogClassName:"",contentClassName:"",backdropClassName:"",className:"",centered:!0,show:C,onHide:x,children:c(U,{children:[e(H.Header,{closeButton:!0,className:"header",children:e("h2",{className:"name_section_app-mbtp",children:"Seleccione la modalidad."})}),e(H.Body,{id:"BusquedaTiposCompras",className:"contenedor-planes",children:e("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll-mbtp",children:e("div",{className:"container mt-4",children:e("div",{className:"tree_categorias-mbtp tree_1",children:c("div",{className:"tree_categorias-mbtp__busqueda-mbtp mb-3 mb-md-4",children:[c("div",{className:"mx-60 mt-30 d-flex",children:[e("button",{button:!0,type:"button",className:"icon-Buscar-click"}),e("input",{type:"text",placeholder:"Busca por modalidad",autoComplete:"off",className:"form-control-mbtp busqueda-input",onKeyDown:G})]}),e("div",{children:e("ul",{className:"tree-root-mbtp",children:b.map(s=>e(U,{children:s.id_padre_sub_categoria==null&&c("li",{className:`tree-node-mbtp has-child draggable ${N.includes(s.id)?"expanded":""}`,id:"sector_"+s.id,children:[c("div",{id:s.id,className:"tree-content-mbtp mt-3 sector",children:[e("i",{className:`tree-arrow-mbtp has-child ${s.childs.length>0?"bi bi-chevron-down":""}`}),e("input",{id:"sector_check_"+s.id,type:"checkbox",name:"tipo_compra",onChange:()=>T(s),checked:A.includes(s.id)?"checked":""}),e("span",{className:"tree-anchor-mbtp",children:e("span",{className:"tree-division-mbtp tree-division-mbtp1",onClick:()=>M(s.id),children:e("span",{className:"tree-division-mbtp__title my-auto",children:s.nombre})})})]},s.id),N.includes(s.id)&&e("ul",{className:"tree-children-mbtp new-class",children:j.map((a,o)=>e(U,{children:s.id==a.id_padre_sub_categoria&&e("li",{className:`tree-node-mbtp has-child draggable segmento ${L.includes(a.id)?"expanded":""}`,id:"segmento_"+a.id,children:c("div",{className:"tree-content-mbtp segmento",children:[e("i",{className:"tree-arrow-mbtp expanded has-child ltr"}),e("input",{id:"segmento_check_"+a.id,type:"checkbox",name:"tipo_compra",onChange:()=>T(a),checked:A.includes(a.id)?"checked":""}),e("span",{className:"tree-anchor-mbtp",children:e("span",{className:"tree-division-mbtp tree-division-mbtp1",children:e(U,{children:o%2==0?e("span",{className:"tree-division-mbtp__title my-auto",children:a.nombre}):e("span",{className:"tree-division-mbtp__title-gray my-auto",children:a.nombre})})})})]})})}))})]})}))})})]})})})})})]})})};const ve=({showBusquedaAvanzada:C,handleCloseBusquedaAvanzada:x,handleBusqueda:b})=>{const[g,r]=u.exports.useState({entidad_contratante:"",objeto:"",codigo_proceso:"",modalidad:"",actividadEconomica:"",ubicacion:"",estado_proceso:"",portalOrigen:"",cuantia_desde:"",cuantia_hasta:"",fecha_desde:"",fecha_hasta:"",contratista:""}),S=w=>{const{name:p,value:E}=w.target;r({...g,[p]:E})},N=()=>{r({entidad_contratante:"",objeto:"",codigo_proceso:"",modalidad:"",actividadEconomica:"",ubicacion:"",estado_proceso:"",portalOrigen:"",cuantia_desde:"",cuantia_hasta:"",fecha_desde:"",fecha_hasta:"",contratista:""}),R([])},y=w=>{w.preventDefault(),b(L())},L=()=>{var w=document.getElementById("form_busqueda_avanzada");let p=new FormData(w),E={};return p.forEach(function(P,V){E[V]=P}),q(E)+"&estado_proceso="+D},q=w=>{const p=[];for(let E in w)p.push(encodeURIComponent(E)+"="+encodeURIComponent(w[E]));return p.join("&")},I=u.exports.useRef(null),[K,A]=u.exports.useState("text"),O=()=>{A("date"),I.current.defaultValue=""},j=()=>{A("text")},[$,M]=u.exports.useState(!1),T=()=>M(!1),J=()=>M(!0),[D,R]=u.exports.useState([]),z=w=>{R(w)},B=w=>{const p=w.target.value,E=w.target.checked;R(E?[...D,p]:D.filter(F=>F!==p))},[G,s]=u.exports.useState(!1),a=()=>s(!1),o=()=>s(!0),[m,i]=u.exports.useState(!1),t=()=>i(!1),n=()=>i(!0),[d,h]=u.exports.useState(!1),f=()=>h(!1),_=()=>h(!0);return c(H,{size:"lg",dialogClassName:"",contentClassName:"",backdropClassName:"",className:"content-modal-busqueda-avanzada",centered:!0,show:C,onHide:x,id:"modalBusquedaAvanzada",children:[c(H.Header,{closeButton:!0,id:"header-modal-busqueda-avanzada",children:[e(se,{title:"Busqueda Avanzada"}),e("button",{className:"circulo",onClick:x,children:e("i",{class:"bi bi-arrow-left iconos"})}),e("div",{className:"titulo",children:e("span",{children:"Búsqueda avanzada"})})]}),e(H.Body,{className:"test",children:e("div",{id:"modal-busqueda-avanzada",children:c(ne,{onSubmit:y,className:"form-container",id:"form_busqueda_avanzada",children:[c("span",{children:[e("i",{class:"bi bi-bank iconos"}),"Entidad contratante:"]}),e("input",{type:"text",name:"entidad_contratante",value:g.entidad_contratante,onChange:S,placeholder:"Ingresa la entidad contratante"}),c("span",{children:[e("i",{class:"bi bi-list-nested iconos"}),"Objeto:"]}),e("input",{type:"text",name:"objeto",value:g.objeto,onChange:S,placeholder:"Ingresa palabras claves del objeto del proceso"}),c("div",{className:"pareja",children:[c("div",{className:"size",children:[c("span",{children:[e("i",{class:"bi bi-asterisk iconos"}),"Numero de contrato:"]}),e("input",{type:"text",name:"codigo_proceso",value:g.codigo_proceso,onChange:S,placeholder:"Ingresa el número del proceso"})]}),c("div",{className:"size",children:[c("span",{children:[e("i",{class:"bi bi-tag iconos"}),"Modalidad:"]}),e("input",{type:"text",name:"modalidad",value:g.modalidad,onChange:S,onClick:_,placeholder:"Ingresa la modalidad de contrato"}),e(_e,{showBusquedaTiposCompras:d,handleCloseBusquedaTiposCompras:f})]})]}),c("span",{children:[e("i",{class:"bi bi-lightning-fill iconos"}),"Actividad económica:"]}),e("input",{type:"text",name:"actividadEconomica",value:g.actividadEconomica,onChange:S,onClick:n,placeholder:"Ingresa la(s) actividade(s) económica(s)"}),e(ge,{showBusquedaActividad:m,handleCloseBusquedaActividad:t}),c("span",{children:[e("i",{class:"bi bi-geo-alt-fill iconos"}),"Ubicación:"]}),e("input",{type:"text",name:"ubicacion",value:g.ubicacion,onChange:S,onClick:o,placeholder:"Ingresa la(s) ubicacióne(s)"}),e(fe,{showBusquedaUbicacion:G,handleCloseBusquedaUbicacion:a}),c("div",{className:"pareja",children:[c("div",{className:"size",children:[c("span",{children:[e("i",{class:"bi bi-clipboard2-fill iconos"}),"Estados:"]}),e("input",{type:"text",value:D.join(","),onClick:J,onChange:B,placeholder:"Selecione los estados de proceso"}),e(be,{showBusquedaEstado:$,handleCloseBusquedaEstado:T,onClose:()=>console.log("Modal cerrado"),onValuesSelected:z})]}),c("div",{className:"size",children:[c("span",{children:[e("i",{class:"bi bi-globe iconos"}),"Portal de origen:"]}),e("input",{type:"text",name:"portalOrigen",value:g.portalOrigen,onChange:S,placeholder:"Ingresa el portal de origen"})]})]}),c("div",{className:"pareja",children:[c("div",{className:"size",children:[c("span",{children:[e("i",{class:"bi bi-cash-coin iconos"}),"Cuantía:"]}),e("input",{type:"text",name:"cuantia_desde",value:g.cuantia_desde,onChange:S,placeholder:"Desde"})]}),c("div",{className:"size",children:[e("span",{children:" "}),e("input",{type:"text",name:"cuantia_hasta",value:g.cuantia_hasta,onChange:S,placeholder:"Hasta"})]})]}),c("div",{className:"pareja",children:[c("div",{className:"size",children:[c("span",{children:[e("i",{class:"bi bi-calendar-date-fill iconos"}),"Fecha de publicación:"]}),e("input",{type:K,name:"fecha_desde",value:g.fecha_desde,onChange:S,placeholder:"Inicio",ref:I,onFocus:O,onBlur:j})]}),c("div",{className:"size",children:[e("span",{children:" "}),e("input",{type:K,name:"fecha_hasta",value:g.fecha_hasta,onChange:S,placeholder:"Fin",ref:I,onFocus:O,onBlur:j})]})]}),c("span",{children:[e("i",{class:"bi bi-person-fill iconos"}),"Contratista(s):"]}),e("input",{type:"text",name:"contratista",value:g.contratista,onChange:S,placeholder:"Ingresa el contratista"}),c("div",{className:"botones",children:[e("button",{className:"limpiar",type:"button",onClick:N,children:"Limpiar"}),e("button",{className:"buscar",type:"submit",children:"Buscar"})]})]})})})]})};const Fe=({auth:C,contratos:x})=>{const[b,g]=u.exports.useState(""),[r,S]=u.exports.useState(x.data);Q("th").click(function(){var l=Q(this).parents("table").eq(0),v=l.find("tr:gt(0)").toArray().sort(N(Q(this).index()));this.asc=!this.asc,this.asc||(v=v.reverse());for(var k=0;k<v.length;k++)l.append(v[k]);L(Q(this),this.asc)});function N(l){return function(v,k){var W=y(v,l),Z=y(k,l);return Q.isNumeric(W)&&Q.isNumeric(Z)?W-Z:W.localeCompare(Z)}}function y(l,v){return Q(l).children("td").eq(v).html()}function L(l,v){Q("th").each(function(k){Q(this).removeClass("sorting"),Q(this).removeClass("asc"),Q(this).removeClass("desc")}),l.addClass("sorting"),v?l.addClass("asc"):l.addClass("desc")}const[q,I]=u.exports.useState(!0),[K,A]=u.exports.useState(0),O=l=>{A(l.id)},j=()=>{A(0)},[$,M]=u.exports.useState(0),[T,J]=u.exports.useState(0);u.exports.useEffect(()=>{document.getElementById("div1");var l=document.getElementById("tabla");document.getElementById("wrapper1");var v=document.getElementById("scroll-table");l&&M(l.offsetWidth),v&&J(v.offsetWidth);var k=document.getElementById("wrapper1"),W=document.querySelector("#scroll-table");k&&(k.onscroll=function(){W.scrollLeft=k.scrollLeft}),W&&(W.onscroll=function(){k.scrollLeft=W.scrollLeft})});const[D,R]=u.exports.useState(x.to),[z,B]=u.exports.useState(x.from),[G,s]=u.exports.useState(x.total),[a,o]=u.exports.useState(x.next_page_url),[m,i]=u.exports.useState(x.prev_page_url),[t,n]=u.exports.useState(""),[d,h]=u.exports.useState(""),f=()=>{var l=document.getElementById("form_busqueda_rapida");let v=new FormData(l),k={};return v.forEach(function(Z,te){k[te]=Z}),_(k)},_=l=>{const v=[];for(let k in l)v.push(encodeURIComponent(k)+"="+encodeURIComponent(l[k]));return v.join("&")},w=l=>{if(l==null)return;let v=f();b!==""&&(v=b),V(!0),fetch(l+"&"+v).then(k=>k.json()).then(k=>{F(k),V(!1)})},p=u.exports.useRef(0);u.exports.useEffect(()=>{p.current!=0&&p.current.addEventListener("keypress",function(l){if(l.key==="Enter"){l.preventDefault();const v=f();V(!0),g(""),fetch("/contratos/?"+v).then(k=>k.json()).then(k=>{F(k),V(!1)})}})},[]);const E=l=>{g(l+"&type=fetch"),V(!0),fetch("/contratos/?"+l+"&type=fetch").then(v=>v.json()).then(v=>{F(v),V(!1)}),ae(!1)},F=l=>{S(l.data),R(l.to),B(l.from),s(l.total),o(l.next_page_url),i(l.prev_page_url)};u.exports.useEffect(()=>{const l=window.location.search,v=new URLSearchParams(l),k=v.get("fecha_publicacion");k!=null&&h(k);const W=v.get("buscador_rapido");W!=null&&n(W)},[]);const[P,V]=u.exports.useState(!1),[X,ae]=u.exports.useState(!1);return c(de,{auth:C,children:[e("link",{rel:"shortcut icon",href:"#"}),c("div",{children:[c("div",{className:"contenedor-filtros",children:[c("div",{className:"",children:[c("form",{method:"get",name:"form_busqueda_rapida",id:"form_busqueda_rapida",children:[e("input",{ref:p,id:"buscador_rapido",className:"buscador_rapido",name:"buscador_rapido",type:"text",value:t,placeholder:"Búsqueda rápida",onChange:l=>n(l.target.value)}),e("input",{name:"fecha_publicacion",type:"hidden",value:d}),e("input",{name:"type",type:"hidden",value:"fetch"})]}),e("span",{className:"material-symbols-outlined posicion-lupa-contratos",children:"search"})]}),e("div",{className:"",children:c("span",{children:[c("button",{onClick:()=>ae(!0),className:"mb-2",children:[e("span",{className:"material-symbols-outlined text-btn-avanzado",children:"list"}),e("span",{className:"text-btn-avanzado",children:"Búsqueda avanzada"})]}),e(ve,{handleBusqueda:l=>E(l),showBusquedaAvanzada:X,handleCloseBusquedaAvanzada:()=>ae(!1)})]})}),c("div",{className:"input-filtro-estado",children:[e("span",{className:"input-filtro-estado-span",children:"Visualizar:"}),c("select",{className:"input-visualizar",children:[e("option",{value:"",children:"todos"}),e("option",{value:"",children:"Vistos recientemente"}),e("option",{value:"",children:"No Leidos"})]})]}),e("div",{children:e(ce,{nextHandler:()=>w(a),prevHandler:()=>w(m),currentPage:z,totalPaginas:D,totalElementos:G})})]}),e("div",{className:"contenedor-contratos",children:e("div",{className:"alto-tabla bg-white overflow-auto",id:"scroll-table",children:P?e(oe,{}):c(U,{children:[e("div",{id:"wrapper1",style:{width:T>0?T:0+"px"},children:e("div",{id:"div1",style:{width:$>0?$:0+"px"}})}),c("table",{id:"tabla",className:"w-full bg-white border tabla table-hover",children:[e("thead",{className:"cabecera-tabla",style:{backgroundColor:"#00a1c9"},children:c("tr",{className:"bg-paginador text-white uppercase leading-normal",children:[e("th",{style:{padding:"0px 0px"},children:"Acciones"}),e("th",{style:{padding:"0px 5px"},children:"Portal"}),e("th",{style:{padding:"0px 80px"},children:"Entidad"}),e("th",{style:{padding:"0px 80px"},children:"Objeto"}),e("th",{style:{padding:"0px 35px"},children:"Cuantía"}),e("th",{style:{padding:"0px 80px"},children:"Modalidad"}),e("th",{style:{padding:"0px 30px"},children:"Número"}),e("th",{style:{padding:"0px 0px"},children:"Estado"}),e("th",{style:{padding:"0px 35px"},children:"Publicada"}),e("th",{style:{padding:"0px 35px"},children:"Ubicación"}),e("th",{style:{padding:"0px 80px"},children:"Actividad económica"})]})}),e("tbody",{children:r.map(l=>c("tr",{className:"tr-users",children:[e("td",{className:"border border-gray-200 text-left mw-90",children:c("div",{className:"iconos-horizontal width-columna-acciones",children:[c("div",{children:[e(pe,{}),e(ue,{url:l.link}),e(he,{})]}),c("div",{className:"",children:[e(le,{}),e(re,{}),e(me,{})]})]})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"circulo",children:l.fuente.alias_portal})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text width-columna-menor",children:l.entidad_contratante})}),c("td",{className:"border border-gray-200 text-left margen-textos mw-200",children:[q&&e(U,{children:K!=l.id&&c("span",{className:"data-text",children:[l.objeto.substr(0,40),"..."," ",e("a",{className:"text-primary",onClick:()=>O(l),children:"Ver más"})]})}),K==l.id&&e("div",{className:"showmore",children:c("span",{className:"data-text",children:[l.objeto,e("a",{className:"text-primary",onClick:()=>j(),children:"Ver menos"})]})})]}),e("td",{className:"border border-gray-200 text-left margen-textos width-columna-menor",children:l.valor>0?"$"+l.valor.toLocaleString("ch-CH"):l.valor_texto}),e("td",{className:"border border-gray-200 text-left margen-textos mw-200",children:e("span",{className:"data-text ",children:l.modalidad})}),e("td",{className:"border border-gray-200 text-left margen-textos ",children:e("span",{className:"data-text ",children:l.codigo_proceso})}),e("td",{className:"border border-gray-200 text-left color-estado margen-textos width-columna-menor",children:e("span",{className:"data-text ",children:l.estado_proceso})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text width-columna-menor",children:l.fecha_publicacion})}),e("td",{className:"border border-gray-200 text-left margen-textos width-columna-menor",children:e("span",{className:"data-text ",children:l.ubicacion})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text ",children:l.actividad_economica})})]},l.id))})]}),r.length<=0&&e("div",{id:"mensajes-personalizado-busqueda",className:"container-fluid content_blank_interno",children:c("div",{className:"row justify-content-center align-items-center",children:[e("div",{className:"col-md-4 col-sm-4 offset-md-1 offset-sm-1",children:e("img",{src:"https://col.licitaciones.info/img/mensajes-personalisados/sin-resultados-busqueda.png",alt:"",className:"img-fluid mensaje-imagen"})}),e("div",{className:"col-md-5 col-sm-5 offset-sm-1 offset-md-1",children:c("div",{className:"estructura-mensaje-personalizado",children:[c("h4",{className:"text-center titulo-personalizado",children:[e("b",{className:"text-rojo",children:"No se encontró"})," ","el resultado."]}),c("div",{className:"position-relative",children:[e("span",{className:"icon-Bombillo mensaje-icono"}),e("p",{className:"mensaje-personalizado d-block text-left",children:"Prueba cambiando tus opciones de búsqueda e intentalo nuevamente."})]})]})})]})})]})})})]})]})};export{Fe as default};
