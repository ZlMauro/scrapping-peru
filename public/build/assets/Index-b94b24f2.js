import{r as t,j as n,F as u,a as e}from"./app-dcd3922e.js";/* empty css                      */import{T as qe,a as Fe}from"./estilos-toast-b87bb345.js";/* empty css                      *//* empty css                 */import{N as P}from"./Nav-bbceeac9.js";import{N as Y,C as Ge,M as Me}from"./ModalLoginSesion-0f574715.js";import{A as je}from"./ApplicationLogoLici-a2e29c08.js";import"./createWithBsPrefix-a68b3894.js";import"./CloseButton-a10fcccb.js";import"./hook-f2dcfbfc.js";import"./Modal-292be896.js";import"./hasClass-0219308f.js";import"./useIsomorphicEffect-edd85f07.js";import"./TextInput-23b1b0eb.js";const he=({subcategorias:Z,id:ee,nameBuscador:ae,onHandleSectores:se,tipo:$,checkeds:z})=>{const[h,xe]=t.exports.useState(Z),[L,ie]=t.exports.useState(Z),[E,I]=t.exports.useState([]),[k,V]=t.exports.useState([]),[pe,J]=t.exports.useState([]);t.exports.useEffect(()=>{var s=[];h.forEach(a=>{if(a.childs.length>0){var i=[],c=[];a.id_padre_sub_categoria==null&&(a.childs.forEach(o=>{i.push(o.id);var d=h.filter(l=>l.id==o.id)[0];d.childs.length>0&&d.childs.forEach(l=>{c.push(l.id)})}),s[a.id]=["sectores"],s[a.id].segmentos=i,s[a.id].actividades_economicas=c)}}),J(s)},[]);const[C,q]=t.exports.useState(z),[T,F]=t.exports.useState([]),[A,G]=t.exports.useState([]),M=s=>{var a=document.getElementById("sector_"+s);a.classList.toggle("expanded"),E.includes(s)?I(E.filter(o=>o!=s)):I([...E,s]);const i=new RegExp(s,"i");L.filter(function(o){if(i.test(o.id_padre_sub_categoria))return o}).forEach(o=>{if(!T.includes(o))T.push(o);else{const d=T.filter(l=>l.id_padre_sub_categoria!=s);F(d)}})},ce=s=>{var a=document.getElementById("segmento_"+s);a.classList.toggle("expanded"),k.includes(s)?V(k.filter(o=>o!=s)):V([...k,s]);const i=new RegExp(s,"i");L.filter(function(o){if(i.test(o.id_padre_sub_categoria))return o}).forEach(o=>{if(!A.includes(o))A.push(o);else{const d=A.filter(l=>l.id_padre_sub_categoria!=s);G(d)}})},w=s=>{var a=[];C.forEach(o=>{a.push(o)});var i=h.filter(o=>o.id_padre_sub_categoria==s.id&&o.id_abuelo_sub_categoria==null);if(i.length>0)a.includes(s.id)?(a=b(a,s.id),a=g(a,i,"segmento","remove")):(a.push(s.id),a=g(a,i,"segmento","remove"),a=g(a,i,"segmento","add"));else{var c=h.filter(o=>o.id_padre_sub_categoria==s.id);c.length>0?a.includes(s.id)?(a=b(a,s.id),a=g(a,c,"actividad_economica","remove")):(a.push(s.id),a=g(a,c,"actividades_economicas","remove"),a=g(a,c,"actividad_economica","add")):a.includes(s.id)?a=b(a,s.id):a.push(s.id)}a=[...new Set(a)],q(a),te(a,s)},te=(s,a)=>{if(f(a.id,"actividades_economicas")){var i=Q(s,"actividades_economicas"),c=W(i,a,"actividades_economicas"),o=c[0],d=c[1],l=!0,v=0,r=R(a.id_padre_sub_categoria,"actividades_economicas");r.forEach(_=>{i.includes(_)?v+=1:l=!1}),l?(s.push(a.id_padre_sub_categoria),p("segmento_check_"+a.id_padre_sub_categoria,"remove")):(s=b(s,a.id_padre_sub_categoria),s=b(s,a.id_abuelo_sub_categoria),q(s),v>0?p("segmento_check_"+a.id_padre_sub_categoria,"add"):p("segmento_check_"+a.id_padre_sub_categoria,"remove"),d>0?p("sector_check_"+a.id_abuelo_sub_categoria,"add"):p("sector_check_"+a.id_abuelo_sub_categoria,"remove")),o&&s.push(a.id_abuelo_sub_categoria)}if(f(a.id,"segmentos")){var x=Q(s,"segmentos"),c=W(x,a,"segmentos"),o=c[0],d=c[1];o?s.push(a.id_padre_sub_categoria):(s=b(s,a.id_padre_sub_categoria),q(s),d>0?p("sector_check_"+a.id_padre_sub_categoria,"add"):(p("sector_check_"+a.id_padre_sub_categoria,"remove"),p("segmento_check_"+a.id,"remove")))}if(f(a.id,"sector")){p("sector_check_"+a.id,"remove");var N=R(a.id,"segmentos");N.forEach(_=>{p("segmento_check_"+_,"remove")})}},R=(s,a)=>{var i=[];return h.forEach(c=>{switch(a){case"actividades_economicas":c.id_padre_sub_categoria==s&&i.push(c.id);break;case"segmentos":c.id_padre_sub_categoria==s&&i.push(c.id);break}}),i},Q=(s,a)=>{var i=[];return s.forEach(c=>{f(c,a)&&i.push(c)}),i},f=(s,a)=>{var i=h.filter(c=>c.id==s)[0];switch(a){case"actividades_economicas":return i.id_abuelo_sub_categoria!=null&&i.id_padre_sub_categoria!=null?i:!1;case"segmentos":return i.id_abuelo_sub_categoria==null&&i.id_padre_sub_categoria!=null?i:!1;case"sector":return i.id_abuelo_sub_categoria==null&&i.id_padre_sub_categoria==null?i:!1}},W=(s,a,i)=>{var c=!0,o=0;if(s.length>0){var d=h.filter(v=>v.id==a.id)[0],l=0;switch(i){case"actividades_economicas":l=d.id_abuelo_sub_categoria;break;case"segmentos":l=d.id_padre_sub_categoria;break;case"sector":l=d.id;break}pe[l][i].forEach(v=>{s.includes(v)?o+=1:c=!1})}else c=!1;return[c,o]},p=(s,a)=>{var i=document.getElementById(s);a=="add"?i&&i.classList.add("check-minus"):i&&i.classList.remove("check-minus")},b=(s,a)=>{const i=s.indexOf(a);return i>-1&&s.splice(i,1),s},g=(s,a,i=null,c)=>(a.forEach(o=>{switch(c){case"add":s.push(o.id),i=="segmento"&&h.filter(l=>l.id_padre_sub_categoria==o.id).forEach(l=>{s.push(l.id)});break;case"remove":s=b(s,o.id),i=="segmento"&&h.filter(l=>l.id_padre_sub_categoria==o.id).forEach(l=>{s=b(s,l.id)});break}}),s),oe=s=>{if(s.target.value==""){ie(h),F([]),G([]),I([]),V([]);return}if(s.key==="Enter"){const l=new RegExp(s.target.value,"i"),v=h.filter(function(r){if(l.test(r.nombre)||s.target.value==r.id)return r});var a=[],i=[],c=[],o=[],d=[];v.forEach(r=>{if(r.id_abuelo_sub_categoria!=null&&r.id_padre_sub_categoria!=null){c.push(r);var x=h.filter(_=>_.id==r.id_padre_sub_categoria)[0];i.includes(x)||i.push(x),o.includes(r.id_padre_sub_categoria)||o.push(r.id_padre_sub_categoria);var N=h.filter(_=>_.id==r.id_abuelo_sub_categoria)[0];a.includes(N)||a.push(N),d.includes(r.id_abuelo_sub_categoria)||d.push(r.id_abuelo_sub_categoria)}if(r.id_abuelo_sub_categoria==null&&r.id_padre_sub_categoria!=null){i.includes(r)||i.push(r),o.includes(r.id)||o.push(r.id);var N=h.filter(re=>re.id==r.id_padre_sub_categoria)[0];a.includes(N)||a.push(N),d.includes(r.id_padre_sub_categoria)||d.push(r.id_padre_sub_categoria)}r.id_abuelo_sub_categoria==null&&r.id_padre_sub_categoria==null&&(a.includes(r)||a.push(r),d.includes(r.id)||d.push(r.id))}),ie(a),F(i),G(c),I(d),V(o)}};t.exports.useEffect(()=>{se(C,$)},[C]);const[B,ne]=t.exports.useState([]);t.exports.useEffect(()=>{let s=[];z.forEach(a=>{if(f(a,"actividades_economicas")){var i=S(a);s.push(i.id);var c=S(i.id);s.push(c.id)}if(f(a,"segmentos")){var c=S(a);s.push(c.id)}}),s=[...new Set(s)],console.log(s),ne(s)},[]);const S=s=>{var a=h.filter(c=>c.id==s)[0],i=h.filter(c=>c.id==a.id_padre_sub_categoria)[0];return i};return n(u,{children:[n("div",{className:"mx-60 mt-30 d-flex",children:[e("button",{button:!0,type:"button",className:"icon-Buscar-click"}),e("input",{type:"text",placeholder:ae,autoComplete:"off",className:"form-control busqueda-input",onKeyDown:oe}),n("h2",{className:"perfiles-titulos d-flex",children:[" ","Pais de contratación",e("img",{className:"bandera",src:"/public/images/banderas/listado_nombres/CHL.svg",alt:"Bandera Chile"})]})]}),e("br",{}),e("ul",{className:`tree-root ${$}`,id:ee,children:L.map(s=>e(u,{children:s.id_padre_sub_categoria==null&&n("li",{className:`tree-node has-child draggable ${E.includes(s.id)?"expanded":""}`,id:"sector_"+s.id,children:[n("div",{id:s.id,className:"tree-content mt-3 sector",children:[e("i",{className:`tree-arrow has-child ${s.childs.length>0?"bi bi-chevron-down":""}`}),e("input",{id:"sector_check_"+s.id,class:`${B.includes(s.id)?"check-minus":""}`,type:"checkbox",name:"actividad_economica",onChange:()=>w(s),checked:C.includes(s.id)?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",onClick:()=>M(s.id),children:e("span",{className:"tree-division__title my-auto",children:s.nombre})})})]},s.id),E.includes(s.id)&&e("ul",{className:`tree-children ${$}`,children:T.map((a,i)=>e(u,{children:s.id==a.id_padre_sub_categoria&&n("li",{className:`tree-node has-child draggable segmento ${k.includes(a.id)?"expanded":""}`,id:"segmento_"+a.id,children:[n("div",{className:"tree-content segmento",children:[e("i",{className:"tree-arrow expanded has-child ltr"}),e("input",{id:"segmento_check_"+a.id,class:`${B.includes(a.id)?"check-minus":""}`,type:"checkbox",name:"actividad_economica",onChange:()=>w(a),checked:C.includes(a.id)?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",onClick:()=>ce(a.id),children:e(u,{children:i%2==0?e("span",{className:"tree-division__title my-auto",children:a.nombre}):e("span",{className:"tree-division__title-gray my-auto",children:a.nombre})})})})]}),k.includes(a.id)&&e("ul",{className:"tree-children actividad-economica",children:A.map((c,o)=>e(u,{children:a.id==c.id_padre_sub_categoria&&e("li",{className:"tree-node draggable",children:n("div",{className:"tree-content actividad-economica",onClick:()=>w(c),children:[e("input",{type:"checkbox",name:"actividad_economica",onChange:()=>w(c),checked:C.includes(c.id)?"checked":""}),e("span",{className:"tree-anchor children",children:e("span",{className:"tree-division tree-division1",children:e(u,{children:e("span",{className:"tree-division__title my-auto",children:c.nombre})})})})]})})}))})]})}))})]})}))})]})},ia=({auth:Z,actividades_economicas:ee,tiposcompras:ae,localizaciones:se})=>{const[$,z]=t.exports.useState(!1),[h,xe]=t.exports.useState(""),[L,ie]=t.exports.useState(""),[E,I]=t.exports.useState(ee);let[k,V]=t.exports.useState([]);t.exports.useState([]),t.exports.useState([]);let[pe,J]=t.exports.useState([]);const[C,q]=t.exports.useState([]),[T,F]=t.exports.useState([]),[A,G]=t.exports.useState([]),M=(m,U)=>{switch(U){case"ActividadEconomica":m.length>0&&q(m);break;case"Localizaciones":m.length>0&&F(m);break;case"TiposCompras":m.length>0&&G(m);break}},[ce,w]=t.exports.useState(!0),[te,R]=t.exports.useState(!1),[Q,f]=t.exports.useState(!1),[W,p]=t.exports.useState(!1),[b,g]=t.exports.useState(!1),[oe,B]=t.exports.useState(!1),[ne,S]=t.exports.useState(!1),[s,a]=t.exports.useState(!1),[i,c]=t.exports.useState(!1),[o,d]=t.exports.useState(!1),[l,v]=t.exports.useState(!0),[r,x]=t.exports.useState(!1),[N,_]=t.exports.useState(!1),[re,X]=t.exports.useState(!1),de=t.exports.useRef(),le=t.exports.useRef(),j=t.exports.useRef(),y=t.exports.useRef(),H=t.exports.useRef(),O=t.exports.useRef(),D=t.exports.useRef(),K=t.exports.useRef(),ue=t.exports.useRef(),me=t.exports.useRef(),Ne=()=>{J(k[0]),de.current.classList.remove("c-activo-iconos"),le.current.classList.remove("c-activo-texto-iconos"),j.current.classList.add("c-activo-iconos"),y.current.classList.add("c-activo-texto-iconos"),w(!1),R(!0),B(!0),v(!1),x(!0)},ke=()=>{J(k[0]),de.current.classList.add("c-activo-iconos"),le.current.classList.add("c-activo-texto-iconos"),j.current.classList.remove("c-activo-iconos"),y.current.classList.remove("c-activo-texto-iconos"),R(!1),w(!0),B(!1),x(!1),v(!0)},Ce=()=>{j.current.classList.remove("c-activo-iconos"),y.current.classList.remove("c-activo-texto-iconos"),H.current.classList.add("c-activo-iconos"),O.current.classList.add("c-activo-texto-iconos"),x(!1),_(!0),R(!1),f(!0),B(!1),S(!0)},Se=()=>{j.current.classList.add("c-activo-iconos"),y.current.classList.add("c-activo-texto-iconos"),H.current.classList.remove("c-activo-iconos"),O.current.classList.remove("c-activo-texto-iconos"),x(!0),_(!1),R(!0),f(!1),B(!0),S(!1)},Le=()=>{D.current.classList.add("c-activo-iconos"),K.current.classList.add("c-activo-texto-iconos"),H.current.classList.remove("c-activo-iconos"),O.current.classList.remove("c-activo-texto-iconos"),_(!1),S(!1),f(!1),p(!0),a(!0),X(!0)},Ee=()=>{D.current.classList.remove("c-activo-iconos"),K.current.classList.remove("c-activo-texto-iconos"),H.current.classList.add("c-activo-iconos"),O.current.classList.add("c-activo-texto-iconos"),a(!1),p(!1),_(!0),S(!0),f(!0),X(!1)},we=()=>{ue.current.classList.add("c-activo-iconos"),me.current.classList.add("c-activo-texto-iconos"),D.current.classList.remove("c-activo-iconos"),K.current.classList.remove("c-activo-texto-iconos"),X(!1),a(!1),p(!1),g(!0),d(!0),c(!0)},Re=()=>{ue.current.classList.remove("c-activo-iconos"),me.current.classList.remove("c-activo-texto-iconos"),D.current.classList.add("c-activo-iconos"),K.current.classList.add("c-activo-texto-iconos"),X(!0),a(!0),p(!0),g(!1),d(!1),c(!1)},Be=()=>{alert("Guardando...")},[_e,Pe]=t.exports.useState(0),[Te,fe]=t.exports.useState(!1),[ve,Ae]=t.exports.useState(!0),be=m=>{var U=m.target.value;U=$e(U),Pe("$ "+new Intl.NumberFormat().format(U))},$e=m=>(m=m.replace(" ",""),m=m.replace("$",""),m=m.replace(",",""),m=m.replace(".",""),m==""?(m=0,fe(!1)):fe(!0),parseInt(m)),[ze,ge]=t.exports.useState(!1),Ie=()=>ge(!1),Ve=()=>ge(!0);return n(u,{children:[n(u,{children:[" ",e("div",{className:"contenido_headerLite--margin-top",children:e(Y,{collapseOnSelect:!0,expand:"lg",bg:"white",variant:"dark",className:"container-headerPublica",children:n(Ge,{children:[e(Y.Brand,{href:"#home",children:e("a",{href:"/",className:"flex items-center",children:e(je,{})})}),e(Y.Toggle,{"aria-controls":"responsive-navbar-nav"}),n(Y.Collapse,{id:"responsive-navbar-nav",children:[n(P,{className:"me-auto",children:[e(P.Link,{className:"menu-header"}),e(P.Link,{className:"menu-header"}),e(P.Link,{className:"menu-header"}),e(P.Link,{className:"menu-header"})]}),e(P,{children:e("ul",{className:"mb-2 mt-2 flex flex-col gap-2 lg:mb-0 lg:mt-0 lg:flex-row lg:items-center lg:gap-6 ",children:n(u,{children:[n("li",{children:[n("a",{className:"flex  items-center ml-4 text-iniciar",onClick:Ve,children:[e("span",{className:"mr-2 icon-login"}),"Iniciar sesión"]}),e(Me,{showLS:ze,handleCloseLS:Ie})]}),e("hr",{className:"division-header header-lite"}),n(P.Link,{href:"/contacto",className:"flex  items-center ml-4 text-contactanos",children:[e("span",{className:"mr-2 icon-contacto"}),"Contáctanos"]})]})})})]})]})})})]}),e(qe,{position:"bottom-start",children:e(Fe,{onClose:()=>z(!1),show:$,delay:3e3,autohide:!0,children:n("div",{className:`notification-toast ${L=="icon-error"?"error":"success"}`,children:[e("span",{className:`toast-icon ${L=="icon-error"?"toast-danger":"toast-success"}`,children:e("span",{className:L})}),e("p",{className:"title",children:h}),e("button",{type:"button",className:"icon-close m-auto",onClick:()=>z(!1)})]})})}),e("div",{className:"contenedor-planes",children:n("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll",children:[n("h2",{className:"perfiles-titulos crear",children:[e("span",{className:"c-verde",children:"Crea"})," tu primer perfil de negocio"]}),e("div",{className:"container mt-4",children:e("div",{className:"tree_categorias tree_1",children:n("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:[n("div",{className:"iconos-perfiles",children:[e("i",{ref:de,className:"icon-Paso-1-click c-activo-iconos",children:" "})," ",e("span",{ref:le,className:"c-activo-texto-iconos",children:"Actividad económica"}),e("i",{ref:j,className:"icon-Paso-2-click",id:"pleft2"})," ",e("span",{ref:y,className:"",children:"Tipo de compra"}),e("i",{ref:H,className:"icon-Paso-3-click",id:"pleft2"})," ",e("span",{ref:O,className:"",children:"Localizaciones"}),e("i",{ref:D,className:"icon-Paso-4-click",id:"pleft2"})," ",e("span",{ref:K,className:"",children:"Rango de Cuantía"}),e("i",{ref:ue,className:"icon-Paso-5-click",id:"pleft2"})," ",e("span",{ref:me,className:"",children:"Paso 5"})]}),e("div",{className:"mx-60 mt-30 d-flex"}),e("br",{}),e(u,{children:ce&&e(he,{subcategorias:E,nameBuscador:"Busca por actividad económica o UNSPSC",onHandleSectores:M,tipo:"ActividadEconomica",checkeds:C})}),n(u,{children:[" ",te&&e(he,{subcategorias:ae,nameBuscador:"Buscar Tipo de Compra",onHandleSectores:M,tipo:"TiposCompras",checkeds:A})]}),e(u,{children:Q&&e(he,{subcategorias:se,nameBuscador:"Buscar Localización",onHandleSectores:M,tipo:"Localizaciones",checkeds:T})}),e(u,{children:W&&n("div",{className:"perfil-cuantias",children:[n("div",{id:"campos-cuantias",className:"justify-content-center pt-2 pb-5 py-md-5 row",children:[e("div",{className:"col-10 col-sm-8 col-lg-4 col-md-5",children:n("div",{className:"form-group mb-5 mb-md-1 campos-cuantias__form",children:[n("span",{className:"icon-Cuantia campos-cuantias__icon",children:[e("span",{className:"path1"}),e("span",{className:"path2"}),e("span",{className:"path3"}),e("span",{className:"path4"})]}),e("label",{children:"Cuantía desde:"}),e("input",{value:_e,onChange:be,type:"text",id:"cuantia_desde",name:"cuantia_desde",placeholder:"$",className:"form-control inputs_form"})]})}),e("div",{className:"col-10 col-sm-8 col-lg-4 col-md-5",children:n("div",{className:"form-group campos-cuantias__form",children:[n("span",{className:"icon-Cuantia-2 campos-cuantias__icon",children:[e("span",{className:"path1"}),e("span",{className:"path2"}),e("span",{className:"path3"}),e("span",{className:"path4"})]}),e("label",{id:"descripcion",children:"Cuantía hasta:"}),e("input",{value:_e,onChange:be,type:"text",id:"cuantia_hasta",name:"cuantia_hasta",placeholder:"Sin limite superior",className:"form-control inputs_form"})]})})]}),Te&&n("div",{class:"align-items-center col-11 col-lg-8 col-md-9 col-sm-10 justify-content-between campos-cuantias__block row",children:[e("div",{class:"col-8 p-0",children:n("p",{children:["¿Deseas incluir contratos"," ",e("span",{class:"text_color",children:"sin presupuesto asignado"})," ","o con cuantía de"," ",e("span",{class:"text_color",children:"$0"})," ","en este perfil?"]})}),e("div",{class:"col-3 text-center",children:n("label",{class:"switch",children:[e("input",{type:"checkbox",checked:ve,onClick:()=>Ae(!ve)}),e("span",{class:"slider round"})]})})]})]})}),n(u,{children:[" ",b&&e("p",{children:"Paso 5"})]})]})})}),n("div",{className:"perfil-bottons-footer position-relative text-center mt-4",children:[e(u,{children:l&&e("a",{onClick:Ne,className:"btn btnRadius btn-new-blue",id:"btn-next-ac",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Siguiente"})})}),e(u,{children:r&&e("a",{onClick:Ce,className:"btn btnRadius btn-new-blue",id:"btn-next-tc",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Siguiente"})})}),e(u,{children:N&&e("a",{onClick:Le,className:"btn btnRadius btn-new-blue",id:"btn-next-lc",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Siguiente"})})}),e(u,{children:o&&e("a",{onClick:Be,className:"btn btnRadius btn-new-blue",id:"btn-next-cu",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Guardar"})})}),e(u,{children:re&&e("a",{onClick:we,className:"btn btnRadius btn-new-blue",id:"btn-next-cu",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Siguiente"})})}),e(u,{children:oe&&e("a",{onClick:ke,className:"btn btnRadius btn-new-blue",id:"btn-return-tc",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Volver"})})}),e(u,{children:ne&&e("a",{onClick:Se,className:"btn btnRadius btn-new-blue",id:"btn-return-lc",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Volver"})})}),e(u,{children:s&&e("a",{onClick:Ee,className:"btn btnRadius btn-new-blue",id:"btn-return-cu",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Volver"})})}),e(u,{children:i&&e("a",{onClick:Re,className:"btn btnRadius btn-new-blue",id:"btn-return-te",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Volver"})})})]})]})})]})};export{ia as default};
