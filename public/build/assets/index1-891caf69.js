import{r as n,a as c,j as f,F as S}from"./app-dcd3922e.js";/* empty css                      *//* empty css              */const A=({tiposcompras:N})=>{const[r,R]=n.exports.useState(N),[E,w]=n.exports.useState(N),[p,g]=n.exports.useState([]),[L,C]=n.exports.useState([]);n.exports.useState([]);const[T,j]=n.exports.useState([]),[v,I]=n.exports.useState([]),[m,k]=n.exports.useState([]);n.exports.useEffect(()=>{var i=[];r.forEach(e=>{if(e.childs.length>0){var a=[];e.id_padre_sub_categoria==null&&(e.childs.forEach(t=>{a.push(t.id),r.filter(s=>s.id==t.id)[0]}),i[e.id]=["sectores"],i[e.id].segmentos=a)}}),j(i)},[]);const O=i=>{var e=document.getElementById("sector_"+i);e.classList.toggle("expanded"),p.includes(i)?g(p.filter(s=>s!=i)):g([...p,i]);const a=new RegExp(i,"i");E.filter(function(s){if(a.test(s.id_padre_sub_categoria))return s}).forEach(s=>{if(!m.includes(s))m.push(s);else{const l=m.filter(o=>o.id_padre_sub_categoria!=i);k(l)}})},B=i=>{var e=[];v.forEach(s=>{e.push(s)});var a=r.filter(s=>s.id_padre_sub_categoria==i.id&&s.id_abuelo_sub_categoria==null);if(a.length>0)e.includes(i.id)?(e=u(e,i.id),e=h(e,a,"segmento","remove")):(e.push(i.id),e=h(e,a,"segmento","remove"),e=h(e,a,"segmento","add"));else{var t=r.filter(s=>s.id_padre_sub_categoria==i.id);t.length>0?e.includes(i.id)?(e=u(e,i.id),e=h(e,t,"tipo_compra","remove")):(e.push(i.id),e=h(e,t,"tiposcompras","remove"),e=h(e,t,"tipo_compra","add")):e.includes(i.id)?e=u(e,i.id):e.push(i.id)}e=[...new Set(e)],I(e),q(e,i)},$=i=>{var e=r.filter(a=>a.id==i)[0];return e.id_abuelo_sub_categoria==null&&e.id_padre_sub_categoria==null?e:!1},F=i=>{var e=r.filter(a=>a.id==i)[0];return e.id_abuelo_sub_categoria==null&&e.id_padre_sub_categoria!=null?e:!1},q=(i,e)=>{if(F(e.id)){var a=[];i.forEach(d=>{F(d)&&a.push(d)});var t=!0,s=0;a.length>0?a.forEach(d=>{var b=r.filter(_=>_.id==d)[0];T[b.id_padre_sub_categoria].segmentos.forEach(_=>{a.includes(_)?s+=1:t=!1})}):t=!1;var l=document.getElementById("sector_check_"+e.id_padre_sub_categoria),o=document.getElementById("segmento_check_"+e.id);t?i.push(e.id_padre_sub_categoria):(i=u(i,e.id_padre_sub_categoria),I(i),s>0?(console.log("here"),l.classList.add("check-minus")):(l.classList.remove("check-minus"),o.classList.remove("check-minus")))}if($(e.id)){var l=document.getElementById("sector_check_"+e.id);l.classList.remove("check-minus")}},u=(i,e)=>{const a=i.indexOf(e);return a>-1&&i.splice(a,1),i},h=(i,e,a=null,t)=>(e.forEach(s=>{switch(t){case"add":i.push(s.id),a=="segmento"&&r.filter(o=>o.id_padre_sub_categoria==s.id).forEach(o=>{i.push(o.id)});break;case"remove":i=u(i,s.id),a=="segmento"&&r.filter(o=>o.id_padre_sub_categoria==s.id).forEach(o=>{i=u(i,o.id)});break}}),i);return c("div",{className:"contenedor-planes",children:c("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll",children:c("div",{className:"container mt-4",children:c("div",{className:"tree_categorias tree_1",children:f("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:[f("div",{className:"mx-60 mt-30 d-flex",children:[c("button",{button:!0,type:"button",className:"icon-Buscar-click"}),c("input",{type:"text",placeholder:"Busca por modalidad",autoComplete:"off",className:"form-control busqueda-input",onKeyDown:i=>{if(i.target.value==""){w(r),k([]),g([]),C([]);return}if(i.key==="Enter"){const l=new RegExp(i.target.value,"i"),o=r.filter(function(d){if(l.test(d.nombre)||i.target.value==d.id)return d});var e=[],a=[],t=[],s=[];o.forEach(d=>{if(d.id_abuelo_sub_categoria!=null&&d.id_padre_sub_categoria!=null){var b=r.filter(x=>x.id==d.id_padre_sub_categoria)[0];a.includes(b)||a.push(b),t.includes(d.id_padre_sub_categoria)||t.push(d.id_padre_sub_categoria)}if(d.id_abuelo_sub_categoria==null&&d.id_padre_sub_categoria!=null){a.includes(d)||a.push(d),t.includes(d.id)||t.push(d.id);var _=r.filter(x=>x.id==d.id_padre_sub_categoria)[0];e.includes(_)||e.push(_),s.includes(d.id_padre_sub_categoria)||s.push(d.id_padre_sub_categoria)}d.id_abuelo_sub_categoria==null&&d.id_padre_sub_categoria==null&&(e.includes(d)||e.push(d),s.includes(d.id)||s.push(d.id))}),w(e),k(a),g(s),C(t)}}})]}),c("div",{children:c("ul",{className:"tree-root",children:E.map(i=>c(S,{children:i.id_padre_sub_categoria==null&&f("li",{className:`tree-node has-child draggable ${p.includes(i.id)?"expanded":""}`,id:"sector_"+i.id,children:[f("div",{id:i.id,className:"tree-content mt-3 sector",children:[c("i",{className:`tree-arrow has-child ${i.childs.length>0?"bi bi-chevron-down":""}`}),c("input",{id:"sector_check_"+i.id,type:"checkbox",name:"tipo_compra",onChange:()=>B(i),checked:v.includes(i.id)?"checked":""}),c("span",{className:"tree-anchor",children:c("span",{className:"tree-division tree-division1",onClick:()=>O(i.id),children:c("span",{className:"tree-division__title my-auto",children:i.nombre})})})]},i.id),p.includes(i.id)&&c("ul",{className:"tree-children new-class",children:m.map((e,a)=>c(S,{children:i.id==e.id_padre_sub_categoria&&c("li",{className:`tree-node has-child draggable segmento ${L.includes(e.id)?"expanded":""}`,id:"segmento_"+e.id,children:f("div",{className:"tree-content segmento",children:[c("i",{className:"tree-arrow expanded has-child ltr"}),c("input",{id:"segmento_check_"+e.id,type:"checkbox",name:"tipo_compra",onChange:()=>B(e),checked:v.includes(e.id)?"checked":""}),c("span",{className:"tree-anchor",children:c("span",{className:"tree-division tree-division1",children:c(S,{children:a%2==0?c("span",{className:"tree-division__title my-auto",children:e.nombre}):c("span",{className:"tree-division__title-gray my-auto",children:e.nombre})})})})]})})}))})]})}))})})]})})})})})};export{A as default};
